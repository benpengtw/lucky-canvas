<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body style="opacity: 1">
    <body>
      <div id="my-lucky"></div>
      <div id="my-lucky2"></div>
      <script src="../packages/core/dist/index.umd.js"></script>
      <script>
        const prizes = [
          {
            background: "#e9e8fe",
            title: "10金幣",
            imgs: [{ src: "imgs/10.png", width: "30%", top: "10%" }],
          },
          {
            fonts: [{ text: "X", top: "10%" }],
            background: "#b8c5f2",
            title: "下次再來",
          },
          {
            background: "#e9e8fe",
            title: "20金幣",
            imgs: [{ src: "imgs/20.png", width: "30%", top: "10%" }],
          },
          {
            fonts: [{ text: "X", top: "10%" }],
            background: "#b8c5f2",
            title: "下次再來",
          },
          {
            background: "#e9e8fe",
            title: "50金幣",
            imgs: [{ src: "imgs/50.png", width: "30%", top: "10%" }],
          },
          {
            background: "#b8c5f2",
            title: "100金幣",
            imgs: [{ src: "imgs/100.png", width: "30%", top: "10%" }],
          },
        ];
        function getRandom(n, m) {
          let num = Math.floor(Math.random() * (m - n + 1) + n);
          return num;
        }
        var result;
        const myLucky = new LuckyCanvas.LuckyWheel("#my-lucky", {
          width: "400px",
          height: "400px",
          blocks: [
            {
              padding: "30px",
              imgs: [
                {
                  src: "imgs/wheel-bg.png",
                  width: "100%",
                  height: "100%",
                },
              ],
            },
          ],
          prizes: prizes,
          buttons: [
            {
              radius: "15%",
              background: "#8a9bf3",
              pointer: true,
              fonts: [{ text: "開始", top: "-10px" }],
            },
          ],
          defaultConfig: {
            gutter: "5px",
          },
          start: function () {
            // 開始遊戲
            myLucky.play();
            // 使用定時器模擬接口
            result = getRandom(0, 5);
            setTimeout(() => {
              // 結束遊戲
              myLucky.stop(result);
            }, 3000);
          },
          end: function () {
            // 結束遊戲後做的事
            confirm(prizes[result].title);
            myLucky.init();
          },
        });
        const prizeImg = {
          src: "imgs/50.png",
          activeSrc: "imgs/100.png",
          width: "50%",
          top: "25%",
        };
        const prizes2 = [
          { x: 0, y: 0, imgs: [prizeImg], text: 0 },
          { x: 1, y: 0, imgs: [prizeImg], text: 1 },
          { x: 2, y: 0, imgs: [prizeImg], text: 2 },
          { x: 2, y: 1, imgs: [prizeImg], text: 3 },
          { x: 2, y: 2, imgs: [prizeImg], text: 4 },
          { x: 1, y: 2, imgs: [prizeImg], text: 5 },
          { x: 0, y: 2, imgs: [prizeImg], text: 6 },
          { x: 0, y: 1, imgs: [prizeImg], text: 7 },
        ];
        var result2;
        const myLucky2 = new LuckyCanvas.LuckyGrid("#my-lucky2", {
          width: "400px",
          height: "400px",
          blocks: [
            {
              padding: "20px",
              imgs: [
                {
                  src: "imgs/grid-bg.png",
                  width: "100%",
                  height: "100%",
                },
              ],
            },
          ],
          prizes: prizes2,
          buttons: [
            {
              x: 1,
              y: 1,
              background: "#9c9dd8",
              fonts: [{ text: "開始", top: "25%" }],
            },
          ],
          defaultStyle: {
            background: "#b8c5f2",
          },
          start: function () {
            // 開始遊戲
            myLucky2.play();
            // 使用定時器模擬接口
            result2 = getRandom(0, 7);
            setTimeout(() => {
              // 結束遊戲
              myLucky2.stop(result2);
            }, 3000);
          },
          end: function () {
            // 結束遊戲後做的事
            confirm(prizes2[result2].text);
            myLucky2.init();
          },
        });
      </script>
    </body>
  </body>
</html>
